name: 'Close inactive PRs'

on:
  schedule:
    - cron: '0 17 * * *'

jobs:
  close-pull-requests:
    if: github.repository == 'vllm-project/llm-compressor'
    permissions:
      issues: write
      pull-requests: write
      actions: write
    runs-on: gcp-k8s-vllm-util
    steps:
      - uses: actions/stale@997185467fa4f803885201cee163a9f38240193d
        with:
          operations-per-run: 1000
          exempt-draft-pr: true
          exempt-issue-labels: 'keep-open'
          exempt-pr-labels: 'keep-open'

          days-before-issue-stale: 90
          days-before-issue-close: 30
          stale-issue-label: 'stale'
          stale-issue-message: >
            This issue has been automatically marked as stale because it has not
            had any activity within 90 days. It will be automatically closed if no
            further activity occurs within 30 days. Leave a comment if
            you feel this issue should remain open. Thank you!
          close-issue-message: >
            This issue has been automatically closed due to inactivity. Please
            feel free to reopen if you feel it is still relevant. Thank you!

          days-before-pr-stale: 90
          days-before-pr-close: 30
          stale-pr-label: 'stale'
          stale-pr-message: >
            This pull request has been automatically marked as stale because it
            has not had any activity within 90 days. It will be automatically
            closed if no further activity occurs within 30 days.
          close-pr-message: >
            This pull request has been automatically closed due to inactivity.
            Please feel free to reopen if you intend to continue working on it.
